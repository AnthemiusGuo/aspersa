#!/bin/bash
#summarize_strace /tmp/aspersa

cat <<EOF > $1
NTOT SZTOT   TMTOT NPRD SZPRD   TMPRD NRED SZRED   TMRED NPRW SZPRW   TMPRW NWRT SZWRT   TMWRT NOPN SZOPN   TMOPN FILENAME
1435  21.2   6.319 1435  21.2   6.319    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000 /data/data/marin_olap_staging/keyword_instance_fact_227_228.ibd
1291  29.3   4.747 1291  29.3   4.747    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000 /data/data/marin_olap_staging/keyword_instance_fact_227_223.ibd
  48   2.0   0.044    0   0.0   0.000   30   2.8   0.043    0   0.0   0.000   18   0.6   0.046    0   0.0   0.000 /var/log/mysql/mysql-relay.002113
  45   0.1   0.051    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000   45   0.1   0.051    0   0.0   0.000 /data/data/master.info
  32  16.0   5.319   32  16.0   5.319    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000 /data/data/marin_olap_staging/keyword_meta_dim_227_223.ibd
  28  21.1   1.132    6  16.0   4.613    0   0.0   0.000   22  22.5   0.182    0   0.0   0.000    0   0.0   0.000 /data/data/marin/vo_versions.ibd
  19  16.8   2.571    7  16.0   6.713    0   0.0   0.000   12  17.3   0.155    0   0.0   0.000    0   0.0   0.000 /data/data/marin/keyword_instances.ibd
   6 162.7   0.343    0   0.0   0.000    0   0.0   0.000    6 162.7   0.343    0   0.0   0.000    0   0.0   0.000 /data/data/ibdata1
   6  16.0   7.331    6  16.0   7.331    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000 /data/data/marin_olap_staging/keyword_meta_dim_227_228.ibd
   5  24.8   0.119    0   0.0   0.000    0   0.0   0.000    5  24.8   0.119    0   0.0   0.000    0   0.0   0.000 /data/data/ib_logfile1
   2   0.1   0.093    0   0.0   0.000    0   0.0   0.000    0   0.0   0.000    2   0.1   0.093    0   0.0   0.000 /var/log/mysql/mysql-relay-log.info
   1  16.0   0.100    0   0.0   0.000    0   0.0   0.000    1  16.0   0.100    0   0.0   0.000    0   0.0   0.000 /data/data/marin/operations.ibd
EOF

cp samples/ioprofile-001.txt /tmp/aspersa
